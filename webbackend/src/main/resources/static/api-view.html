<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>API 보기 - 주식 분석 시스템</title>
    <link rel="stylesheet" href="css/dashboard.css" />
    <link rel="stylesheet" href="css/api-view.css" />
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>API 보기</h1>
        <p>주식 분석 시스템 API 엔드포인트</p>
      </div>

      <div class="navigation">
        <a href="/" class="nav-link">메인</a>
        <a href="/api-view.html" class="nav-link active">API 보기</a>
        <a href="/email-subscription.html" class="nav-link">이메일 구독</a>
        <a href="/admin-login.html" class="nav-link">관리자</a>
      </div>

      <div class="api-container">
        <div class="api-section">
          <h2>주식 데이터 API</h2>

          <div class="api-endpoint">
            <span class="method method-get">GET</span>
            <strong>종목 목록 조회</strong>
            <div class="endpoint-url">/api/stocks/symbols</div>
            <div class="description">
              사용 가능한 주식 종목 목록을 조회합니다.
            </div>
            <button
              class="test-button"
              onclick="testEndpoint('/api/stocks/symbols', 'GET')"
            >
              테스트
            </button>
            <div
              class="response-area"
              id="response-symbols"
              style="display: none"
            >
              <strong>응답:</strong>
              <div class="response-content" id="content-symbols"></div>
            </div>
          </div>

          <div class="api-endpoint">
            <span class="method method-get">GET</span>
            <strong>실시간 주가 데이터</strong>
            <div class="endpoint-url">/api/stocks/realtime/{symbol}</div>
            <div class="description">
              특정 종목의 실시간 주가 정보를 조회합니다.
            </div>
            <div class="parameters">
              <div class="parameter">
                <span class="parameter-name">symbol</span>
                <span class="parameter-type">(path)</span> - 주식 심볼 (예:
                AAPL)
              </div>
            </div>
            <button
              class="test-button"
              onclick="testEndpoint('/api/stocks/realtime/AAPL', 'GET')"
            >
              테스트 (AAPL)
            </button>
            <div
              class="response-area"
              id="response-realtime"
              style="display: none"
            >
              <strong>응답:</strong>
              <div class="response-content" id="content-realtime"></div>
            </div>
          </div>

          <div class="api-endpoint">
            <span class="method method-get">GET</span>
            <strong>기술적 분석 결과</strong>
            <div class="endpoint-url">/api/stocks/analysis/{symbol}</div>
            <div class="description">
              특정 종목의 기술적 분석 결과를 조회합니다.
            </div>
            <div class="parameters">
              <div class="parameter">
                <span class="parameter-name">symbol</span>
                <span class="parameter-type">(path)</span> - 주식 심볼 (예:
                AAPL)
              </div>
            </div>
            <button
              class="test-button"
              onclick="testEndpoint('/api/stocks/analysis/AAPL', 'GET')"
            >
              테스트 (AAPL)
            </button>
            <div
              class="response-area"
              id="response-analysis"
              style="display: none"
            >
              <strong>응답:</strong>
              <div class="response-content" id="content-analysis"></div>
            </div>
          </div>

          <div class="api-endpoint">
            <span class="method method-get">GET</span>
            <strong>과거 데이터</strong>
            <div class="endpoint-url">
              /api/stocks/historical/{symbol}?days={days}
            </div>
            <div class="description">
              특정 종목의 과거 주가 데이터를 조회합니다.
            </div>
            <div class="parameters">
              <div class="parameter">
                <span class="parameter-name">symbol</span>
                <span class="parameter-type">(path)</span> - 주식 심볼 (예:
                AAPL)
              </div>
              <div class="parameter">
                <span class="parameter-name">days</span>
                <span class="parameter-type">(query)</span> - 조회할 일수
                (기본값: 30)
              </div>
            </div>
            <button
              class="test-button"
              onclick="testEndpoint('/api/stocks/historical/AAPL?days=7', 'GET')"
            >
              테스트 (AAPL, 7일)
            </button>
            <div
              class="response-area"
              id="response-historical"
              style="display: none"
            >
              <strong>응답:</strong>
              <div class="response-content" id="content-historical"></div>
            </div>
          </div>
        </div>

        <div class="api-section">
          <h2>이메일 구독 API</h2>

          <div class="api-endpoint">
            <span class="method method-post">POST</span>
            <strong>이메일 구독 신청</strong>
            <div class="endpoint-url">/api/email-subscriptions/subscribe</div>
            <div class="description">이메일 구독을 신청합니다.</div>
            <div class="parameters">
              <div class="parameter">
                <span class="parameter-name">name</span>
                <span class="parameter-type">(body)</span> - 이름
              </div>
              <div class="parameter">
                <span class="parameter-name">email</span>
                <span class="parameter-type">(body)</span> - 이메일
              </div>
              <div class="parameter">
                <span class="parameter-name">phone</span>
                <span class="parameter-type">(body)</span> - 전화번호 (선택사항)
              </div>
              <div class="parameter">
                <span class="parameter-name">isEmailConsent</span>
                <span class="parameter-type">(body)</span> - 이메일 동의 여부
              </div>
              <div class="parameter">
                <span class="parameter-name">isPhoneConsent</span>
                <span class="parameter-type">(body)</span> - 전화 동의 여부
              </div>
            </div>
            <button class="test-button" onclick="testSubscribe()">
              테스트 구독
            </button>
            <div
              class="response-area"
              id="response-subscribe"
              style="display: none"
            >
              <strong>응답:</strong>
              <div class="response-content" id="content-subscribe"></div>
            </div>
          </div>

          <div class="api-endpoint">
            <span class="method method-get">GET</span>
            <strong>구독 목록 조회</strong>
            <div class="endpoint-url">/api/email-subscriptions/list</div>
            <div class="description">
              구독자 목록을 조회합니다. (개인정보 마스킹됨)
            </div>
            <button
              class="test-button"
              onclick="testEndpoint('/api/email-subscriptions/list', 'GET')"
            >
              테스트
            </button>
            <div class="response-area" id="response-list" style="display: none">
              <strong>응답:</strong>
              <div class="response-content" id="content-list"></div>
            </div>
          </div>
        </div>

        <div class="api-section">
          <h2>관리자 API</h2>

          <div class="api-endpoint">
            <span class="method method-post">POST</span>
            <strong>관리자 로그인</strong>
            <div class="endpoint-url">/api/admin/login</div>
            <div class="description">관리자 계정으로 로그인합니다.</div>
            <div class="parameters">
              <div class="parameter">
                <span class="parameter-name">email</span>
                <span class="parameter-type">(body)</span> - 관리자 이메일
              </div>
              <div class="parameter">
                <span class="parameter-name">password</span>
                <span class="parameter-type">(body)</span> - 비밀번호
              </div>
            </div>
            <button class="test-button" onclick="testAdminLogin()">
              테스트 로그인
            </button>
            <div
              class="response-area"
              id="response-admin-login"
              style="display: none"
            >
              <strong>응답:</strong>
              <div class="response-content" id="content-admin-login"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="js/auth-menu.js"></script>
    <script src="js/api-view.js"></script>
  </body>
</html>
