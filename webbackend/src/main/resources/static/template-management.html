<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI 이메일 템플릿 관리</title>
    <link rel="stylesheet" href="css/common.css" />
    <link rel="stylesheet" href="css/dashboard.css" />
    <link rel="stylesheet" href="css/template-management.css" />
</head>
<body>
    <header class="main-header">
      <div class="header-content">
        <div class="header-logo">
          <a href="/" aria-label="홈으로 이동">실시간 주식 분석 시스템</a>
        </div>
        <div class="header-actions">
          <nav class="nav-menu">
            <a href="/" class="nav-item">홈</a>
            <a href="/template-management.html" class="nav-item active">템플릿보기</a>
            <a href="/api-view.html" class="nav-item">API보기</a>
            <a href="/admin-dashboard.html" class="nav-item">관리자대시보드</a>
          </nav>
          <button class="icon-btn" onclick="logout()" title="로그아웃">로그아웃</button>
          <button id="symbolSelectBtn" class="icon-btn" title="종목 선택">종목선택</button>
        </div>
      </div>
    </header>

    <main id="main-content" role="main">
      <section class="content-section" aria-labelledby="template-title">
        <div class="container">
          <div class="content-header">
            <h1 id="template-title" class="section-title">AI 이메일 템플릿 관리</h1>
          </div>

          <div class="ai-email-section" style="background: #fff; border-radius: 16px; padding: 24px; margin-bottom: 30px;">
            <h3 style="font-size: 1.25rem; font-weight: 700; color: #2f456e; margin-bottom: 20px; padding-bottom: 12px; border-bottom: 2px solid #60bde6;">AI 분석 이메일 발송</h3>
        <div class="form-group">
            <label for="templateSelect">템플릿 선택</label>
            <select id="templateSelect" class="form-control">
                <option value="">템플릿을 선택하세요</option>
            </select>
        </div>
        <div class="symbol-input">
            <input
                    type="text"
                    id="symbolInput"
                    placeholder="종목 심볼 (예: AAPL, GOOGL)"
                    value="AAPL"
            />
            <button class="btn btn-success" onclick="sendAIEmail()">
                AI 분석 이메일 발송
            </button>
        </div>
        <div class="symbol-input">
            <input
                    type="text"
                    id="bulkSymbolsInput"
                    placeholder="여러 종목 (쉼표로 구분, 예: AAPL,GOOGL,MSFT)"
                    value="AAPL,GOOGL,MSFT"
            />
            <button class="btn btn-success" onclick="sendBulkAIEmail()">
                대량 AI 분석 이메일 발송
            </button>
        </div>
        <div id="emailResult" class="result-area" style="display: none"></div>
    </div>

          <div class="template-form" style="background: #fff; border-radius: 16px; padding: 24px; margin-bottom: 30px;">
            <h3 style="font-size: 1.25rem; font-weight: 700; color: #2f456e; margin-bottom: 20px; padding-bottom: 12px; border-bottom: 2px solid #60bde6;">새 템플릿 생성</h3>
        <form id="templateForm">
            <div class="form-group">
                <label for="templateName">템플릿 이름</label>
                <input type="text" id="templateName" required />
            </div>

            <div class="form-group">
                <label for="templateSubject">이메일 제목</label>
                <input
                        type="text"
                        id="templateSubject"
                        placeholder="예: 주식 분석 리포트 - {date}"
                        required
                />
            </div>

            <div class="form-group">
                <label for="templateContent">이메일 내용</label>
                <textarea
                        id="templateContent"
                        placeholder="예시:
안녕하세요, {name}님!

다음은 {symbol} 종목에 대한 분석 결과입니다:

{ai_analysis}

기술적 분석:
- 현재가: {current_price}
- 변동률: {change_percent}%
- RSI: {rsi}
- MACD: {macd}
- 트렌드: {trend}

시장 심리: {market_sentiment}
리스크 레벨: {risk_level}
투자 추천: {recommendation}
신뢰도: {confidence_score}%

더 자세한 분석은 대시보드에서 <a href=\"http://localhost:8080\">확인</a>하세요

                주식 분석 시스템

                사용 가능한 변수: {name}, {email}, {symbol}, {date}, {ai_analysis}, {current_price}, {change_percent}, {rsi}, {macd}, {trend}, {market_sentiment}, {risk_level}, {recommendation}, {confidence_score}"
                required
                ></textarea>
            </div>

            <button type="submit" class="btn">템플릿 생성</button>
        </form>
    </div>

          <div class="template-list" style="background: #fff; border-radius: 16px; padding: 24px;">
            <h3 style="font-size: 1.25rem; font-weight: 700; color: #2f456e; margin-bottom: 20px; padding-bottom: 12px; border-bottom: 2px solid #60bde6;">기존 템플릿</h3>
            <div id="templateList">
            </div>
          </div>
        </div>
      </section>
    </main>

<footer class="main-footer">
  <div class="footer-content">
    <div class="footer-links">
      <a href="/company.html">회사소개</a>
      <a href="/terms.html">이용약관</a>
      <a href="/privacy.html">개인정보처리방침</a>
      <a href="/contact.html">고객센터</a>
    </div>
    <div class="footer-copyright">
      <p class="footer-logo">주식 분석 시스템. All Rights Reserved.</p>
    </div>
  </div>
</footer>

<script src="js/auth-menu.js"></script>
<script src="js/template-management.js"></script>
</body>
</html>
